## Introduction to the masonclj *Example* model
Marshall Abrams

Sections:<br/>
<a href="#overview">Overview</a>,
<a href="#run">How to run it</a>,
<a href="#parameters">Parameters</a>,
<a href="#license">License</a>

<a name="overview"></a><h2>Overview:</h2>

<em>Example</em> is a relatively simple MASON model written in Clojure
using the masonclj library.  

Although Example does nothing but cause little circles to run around
on a hexagonal grid, some of the code is a little more complicated
than it needs to be.  I'm not sure whether this is ideal, but I also
want to make available a full-fledged illustration of a MASON model using and
masonclj; that is in my [pasta](https://github.com/mars0i/pasta) repo.
Example is in fact a stripped-down version of pasta, so that once you
understand Example, it will be easier to see what's going on in pasta.
(Let me know if you feel that I have made Example too difficult to
understand.)

The agents here are called "snipes", defined in
snipes.clj. Snipes run around in an environment and don't do anything
else.  The snipe behavior is implemented in popenv.clj.  ("Popenv"
means population-environment; it is the combination of the population
and its environment. In pasta, the environment contains mushrooms, and
snipes and mushrooms interact; snipes eat mushrooms.)

The main MASON control file is Sim.clj, which subclasses MASON's
`SimState` class.  Another important file is `GUI.clj`, which
controles the GUI; this subclasses MASON's `GUIState`.

The usual entry point is neither Sim.clj nor GUI.clj, although both
contain `main` methods.  The entry point is a traditional one for
Clojure: core.clj.  This file determines whether the main in Sim.clj or
the one for the GUI in GUI.clj is called.  (You don't have to set up
things this way, but that's how I did it.)

[If you want your agents to move around on a grid, you don't have to use
a hexagonal grid. Mason also allows rectangular grids, and they will
make your code a little simpler in a few spots.  With a rectangular grid
you may need to choose between movement from one cell to a cell in its
von Neumann neighborhood (right, left, up, down) or in its Moore
neighborhood (also includes diagonally adjacent cells).  Notice it takes
two steps to reach a diagonally adjacent cell with a von Neumann
neighborhood, but one step will move agents farther in a diagonal
direction than horizontally or vertically with a Moore neighborhood.
The neighborhood structure make a big difference in some models, and can
produce artifactual effects. (J. McKenzie Alexander's book *The
Structural Evolution of Morality* is a great source on this point.)  The
advantage of a hexagonal grid is that it's isotropic: One step to any
adjacent cell, and there is no direction in which movement is faster.]


<a name="run"></a><h2>How to run it:</h2>

To run it, you should have Clojure and Leiningen installed.  You will
also need to have MASON installed, along with some libraries that it
depends on.  There is more information on this in the [masonclj
documentation](https://github.com/mars0i/masonclj/tree/master/doc/masonclj).

Then enter `lein run` from the example directory.  This will execute the
GUI verison of Example.  If you execute `lein run -- --help`, you will
get a list of command line options.  Running `lein run -- <options>`
will run a no-gui version with those options.  (This is not very useful
in the case of Example, but can be very useful for other models.)
You can also explicitly run Example with or without the GUI using:
```
lein with-profile gui run
```
or
```
lein with-profile nogui run
```
With this last method you can add `-- --help` or `-- -?` to get
a list of Example options, or `-- -help` (one dash on "help") to
get a list of MASON options.  For example, the MASON options include
`-for`, which can be used to set how many timesteps to run.

<a name="parameters"></a><h2>Parameters:</h2>

The following parameters for model runs can be set in the Model tab.
(This HTML table is from the file gui_vars_table.html that is
automatically generated by `masonclj.params/defparams`.)

<table style="width:100%"><tr><td valign=top>NumSnipes:</td> <td>Size of snipe population</td></tr>
<tr><td valign=top>MaxEnergy:</td> <td>Maximum energy level for snipes.</td></tr>
<tr><td valign=top>EnvWidth:</td> <td>Width of env.  Must be an even number.</td></tr>
<tr><td valign=top>EnvHeight:</td> <td>Height of env. Must be an even number.</td></tr>
</table>

<a name="license"></a><h2>License:</h2>

This software is copyright 2016, 2017, 2018, 2019 by Marshall Abrams
(http://members.logical.net/~marshall/), and is distributed under the
Gnu General Public License version 3.0
(http://www.gnu.org/copyleft/gpl.html), except where noted or where
code has been included that was released under a different license.

</body>
</html>
